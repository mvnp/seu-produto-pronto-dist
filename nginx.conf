server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # =========================
  # Gzip compression
  # =========================
  gzip on;
  gzip_comp_level 5;
  gzip_min_length 256;
  gzip_types
    text/plain
    text/css
    application/javascript
    application/json
    application/xml
    application/rss+xml
    image/svg+xml;
  gzip_vary on;

  # =========================
  # Brotli compression (se o módulo estiver disponível)
  # =========================
  brotli on;
  brotli_comp_level 5;
  brotli_types
    text/plain
    text/css
    application/javascript
    application/json
    application/xml
    image/svg+xml;

  # =========================
  # Cache de longo prazo para assets estáticos
  # =========================
  location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|eot|ttf|svg)$ {
    expires 6M;
    access_log off;
    add_header Cache-Control "public, immutable";
  }

  # =========================
  # SPA fallback (React, Vue, Angular, Vite)
  # =========================
  location / {
    try_files $uri /index.html;
  }
}